<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COA Search | ZyntroTest Laboratory</title>
    <meta name="description" content="Search and retrieve your Certificate of Analysis from ZyntroTest's secure database. Enter your COA number to access detailed testing results and reports.">
    <meta name="keywords" content="COA search, certificate lookup, testing results, ZyntroTest COA database, analytical report access">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="COA Search | ZyntroTest Laboratory">
    <meta property="og:description" content="Search and retrieve your Certificate of Analysis from ZyntroTest's secure database. Enter your COA number to access detailed testing results and reports.">
    <meta property="og:image" content="images/zyntrotest-logo.svg">
    <meta property="og:url" content="https://zyntrotest.com/coa-samples.html">
    <meta property="og:site_name" content="ZyntroTest Laboratory">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="COA Search | ZyntroTest Laboratory">
    <meta name="twitter:description" content="Access your Certificate of Analysis and detailed testing results from ZyntroTest's secure database.">
    <meta name="twitter:image" content="images/zyntrotest-logo.svg">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-brand">
                    <a href="index.html" class="logo">
                        <img src="images/zyntrotest-logo.svg" alt="ZyntroTest - Analytical Lab Solutions">
                    </a>
                </div>
                <div class="nav-menu" id="nav-menu">
                    <ul class="nav-list">
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="services.html" class="nav-link">Services</a></li>
                        <li><a href="sample-submission.html" class="nav-link">Submit Sample</a></li>
                        <li><a href="coa-samples.html" class="nav-link active">COA Search</a></li>
                        <li><a href="blog.html" class="nav-link">Blog</a></li>
                        <li><a href="contact.html" class="nav-link">Contact</a></li>
                    </ul>
                </div>
                <button class="nav-toggle" id="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </nav>
    </header>

    <!-- COA Search Header -->
    <section class="coa-header">
        <div class="container">
            <div class="coa-header-content">
                <h1>COA Search & Lookup</h1>
                <p>Enter your COA number below to access your Certificate of Analysis. All testing results are securely stored and available for download with your unique COA identifier.</p>
                
                <!-- COA Search Form -->
                <div class="coa-search-form">
                    <form class="search-form" onsubmit="searchCOA(event)">
                        <div class="form-group">
                            <input type="text" id="coa-number" placeholder="Enter COA Number (e.g., ZT-2024-001)" required class="coa-search-input">
                            <button type="submit" class="btn btn-primary btn-large">Search COA</button>
                        </div>
                    </form>
                    <div class="search-help">
                        <p><strong>Need help finding your COA number?</strong></p>
                        <ul>
                            <li>Check your email confirmation from ZyntroTest</li>
                            <li>Look for format: ZT-YYYY-XXX (e.g., ZT-2024-001)</li>
                            <li>Contact us at <a href="mailto:info@zyntrotest.com">info@zyntrotest.com</a> for assistance</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- COA Search Results -->
    <section class="coa-results" id="search-results" style="display: none;">
        <div class="container">
            <div class="results-header">
                <h2>Certificate of Analysis Found</h2>
                <div id="coa-content"><!-- COA will be loaded here --></div>
            </div>
        </div>
    </section>

    <!-- Sample COAs Section -->
    <section class="sample-coas-section">
        <div class="container">
            <h2 class="section-title">Sample COA Formats</h2>
            <p class="section-subtitle">View examples of our professional reporting standards and comprehensive analytical documentation.</p>
            <div class="overview-grid">
                <div class="overview-content">
                    <h3>Professional Analytical Reporting</h3>
                    <p>ZyntroTest provides detailed Certificates of Analysis for peptides, supplements, and biotech samples, ensuring trust and regulatory compliance. Our reports include comprehensive analytical data, professional interpretation, and clear conclusions.</p>
                    
                    <div class="coa-features">
                        <div class="feature">
                            <div class="feature-icon">📊</div>
                            <div class="feature-content">
                                <strong>Comprehensive Data</strong>
                                <span>Complete analytical results with chromatograms and spectra</span>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">🔬</div>
                            <div class="feature-content">
                                <strong>LCMS with DAD</strong>
                                <span>Advanced instrumentation for precise analysis</span>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">✅</div>
                            <div class="feature-content">
                                <strong>Professional Interpretation</strong>
                                <span>Expert analysis and clear conclusions</span>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">📋</div>
                            <div class="feature-content">
                                <strong>Regulatory Compliance</strong>
                                <span>Format meets industry standards and regulations</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="coa-preview-large">
                    <div class="preview-document">
                        <div class="doc-header">
                            <div class="lab-logo">ZyntroTest</div>
                            <div class="doc-title">Certificate of Analysis</div>
                        </div>
                        <div class="doc-content">
                            <div class="sample-info">
                                <div class="info-row">
                                    <span class="label">Sample ID:</span>
                                    <span class="value">ZT-2024-001</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Client:</span>
                                    <span class="value">BioVenture Research</span>
                                </div>
                                <div class="info-row">
                                    <span class="label">Compound:</span>
                                    <span class="value">BPC-157</span>
                                </div>
                            </div>
                            <div class="results-section">
                                <div class="result-item">
                                    <span class="test-name">Purity (HPLC):</span>
                                    <span class="result-value">99.8%</span>
                                </div>
                                <div class="result-item">
                                    <span class="test-name">Molecular Weight:</span>
                                    <span class="result-value">1419.6 Da</span>
                                </div>
                                <div class="result-item">
                                    <span class="test-name">Water Content:</span>
                                    <span class="result-value">2.3%</span>
                                </div>
                            </div>
                            <div class="chromatogram-preview">
                                <div class="chart-placeholder">
                                    <div class="chart-title">HPLC Chromatogram</div>
                                    <div class="chart-visual">
                                        <svg viewBox="0 0 200 80" class="chart-svg">
                                            <path d="M10 70 Q50 65 80 40 Q100 20 120 25 Q140 30 160 60 Q180 70 190 70" 
                                                  stroke="#2563eb" stroke-width="2" fill="none"/>
                                            <circle cx="100" cy="20" r="3" fill="#10b981"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sample COAs -->
    <section class="sample-coas">
        <div class="container">
            <h2 class="section-title">Sample Certificates</h2>
            <div class="coa-grid">
                <!-- Peptide COA -->
                <div class="coa-card">
                    <div class="coa-thumbnail">
                        <div class="thumbnail-content">
                            <div class="thumb-header">
                                <div class="thumb-logo">ZyntroTest</div>
                                <div class="thumb-title">Certificate of Analysis</div>
                            </div>
                            <div class="thumb-body">
                                <div class="thumb-info">
                                    <strong>BPC-157 Peptide</strong>
                                    <span>Purity Analysis</span>
                                </div>
                                <div class="thumb-results">
                                    <div class="thumb-result">Purity: 99.8%</div>
                                    <div class="thumb-result">MW: 1419.6 Da</div>
                                    <div class="thumb-result">Water: 2.3%</div>
                                </div>
                                <div class="thumb-chart">
                                    <svg viewBox="0 0 120 40" class="mini-chart">
                                        <path d="M5 35 Q20 30 35 15 Q45 5 55 8 Q65 12 75 28 Q85 35 115 35" 
                                              stroke="#2563eb" stroke-width="1.5" fill="none"/>
                                        <circle cx="45" cy="5" r="2" fill="#10b981"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="coa-info">
                        <h3>Peptide Purity Testing</h3>
                        <div class="coa-details">
                            <div class="detail-item">
                                <strong>Sample:</strong>
                                <span>BPC-157 Research Peptide</span>
                            </div>
                            <div class="detail-item">
                                <strong>Method:</strong>
                                <span>HPLC-MS with DAD Detection</span>
                            </div>
                            <div class="detail-item">
                                <strong>Analysis Date:</strong>
                                <span>October 2024</span>
                            </div>
                            <div class="detail-item">
                                <strong>Result:</strong>
                                <span class="result-highlight">99.8% Purity (HPLC)</span>
                            </div>
                        </div>
                        <p class="coa-description">
                            Comprehensive purity analysis including HPLC chromatogram, mass spectral data, water content determination, and impurity profiling. Perfect example of peptide COA for e-commerce compliance.
                        </p>
                        <div class="coa-actions">
                            <button onclick="viewCOA('peptide')" class="btn btn-primary">View Full COA</button>
                            <button onclick="downloadCOA('peptide-bpc157')" class="btn btn-outline">Download PDF</button>
                        </div>
                    </div>
                </div>

                <!-- Supplement COA -->
                <div class="coa-card">
                    <div class="coa-thumbnail">
                        <div class="thumbnail-content">
                            <div class="thumb-header">
                                <div class="thumb-logo">ZyntroTest</div>
                                <div class="thumb-title">Certificate of Analysis</div>
                            </div>
                            <div class="thumb-body">
                                <div class="thumb-info">
                                    <strong>Pre-Workout Supplement</strong>
                                    <span>Adulterant Screening</span>
                                </div>
                                <div class="thumb-results">
                                    <div class="thumb-result status-pass">✓ No Adulterants</div>
                                    <div class="thumb-result">Caffeine: 150mg</div>
                                    <div class="thumb-result">PDE-5: Not Detected</div>
                                </div>
                                <div class="thumb-chart">
                                    <svg viewBox="0 0 120 40" class="mini-chart">
                                        <rect x="10" y="20" width="8" height="15" fill="#10b981"/>
                                        <rect x="25" y="10" width="8" height="25" fill="#10b981"/>
                                        <rect x="40" y="25" width="8" height="10" fill="#10b981"/>
                                        <rect x="55" y="15" width="8" height="20" fill="#10b981"/>
                                        <rect x="70" y="30" width="8" height="5" fill="#94a3b8"/>
                                        <rect x="85" y="32" width="8" height="3" fill="#94a3b8"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="coa-info">
                        <h3>Supplement Adulterant Screening</h3>
                        <div class="coa-details">
                            <div class="detail-item">
                                <strong>Sample:</strong>
                                <span>Pre-Workout Formula</span>
                            </div>
                            <div class="detail-item">
                                <strong>Method:</strong>
                                <span>LCMS Adulterant Panel</span>
                            </div>
                            <div class="detail-item">
                                <strong>Analysis Date:</strong>
                                <span>October 2024</span>
                            </div>
                            <div class="detail-item">
                                <strong>Result:</strong>
                                <span class="result-highlight status-pass">✓ PASS - No Adulterants Detected</span>
                            </div>
                        </div>
                        <p class="coa-description">
                            Complete adulterant screening including PDE-5 inhibitors, stimulants, and other pharmaceutical compounds. Includes quantitative analysis of declared ingredients and comprehensive safety assessment.
                        </p>
                        <div class="coa-actions">
                            <button onclick="viewCOA('supplement')" class="btn btn-primary">View Full COA</button>
                            <button onclick="downloadCOA('supplement-preworkout')" class="btn btn-outline">Download PDF</button>
                        </div>
                    </div>
                </div>

                <!-- Biotech COA -->
                <div class="coa-card">
                    <div class="coa-thumbnail">
                        <div class="thumbnail-content">
                            <div class="thumb-header">
                                <div class="thumb-logo">ZyntroTest</div>
                                <div class="thumb-title">Certificate of Analysis</div>
                            </div>
                            <div class="thumb-body">
                                <div class="thumb-info">
                                    <strong>API Intermediate</strong>
                                    <span>Impurity Profiling</span>
                                </div>
                                <div class="thumb-results">
                                    <div class="thumb-result">Main Peak: 98.2%</div>
                                    <div class="thumb-result">Imp-A: 0.8%</div>
                                    <div class="thumb-result">Imp-B: 0.7%</div>
                                </div>
                                <div class="thumb-chart">
                                    <svg viewBox="0 0 120 40" class="mini-chart">
                                        <path d="M5 35 Q15 32 25 30 Q35 25 45 8 Q55 5 65 12 Q75 18 85 32 Q95 35 115 35" 
                                              stroke="#06b6d4" stroke-width="1.5" fill="none"/>
                                        <circle cx="45" cy="8" r="2" fill="#10b981"/>
                                        <circle cx="25" cy="30" r="1" fill="#f59e0b"/>
                                        <circle cx="85" cy="32" r="1" fill="#f59e0b"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="coa-info">
                        <h3>Biotech Impurity Profiling</h3>
                        <div class="coa-details">
                            <div class="detail-item">
                                <strong>Sample:</strong>
                                <span>Pharmaceutical Intermediate</span>
                            </div>
                            <div class="detail-item">
                                <strong>Method:</strong>
                                <span>HPLC-MS Impurity Profile</span>
                            </div>
                            <div class="detail-item">
                                <strong>Analysis Date:</strong>
                                <span>October 2024</span>
                            </div>
                            <div class="detail-item">
                                <strong>Result:</strong>
                                <span class="result-highlight">98.2% Main Component</span>
                            </div>
                        </div>
                        <p class="coa-description">
                            Detailed impurity profiling with identification and quantification of related substances. Includes forced degradation studies, structural elucidation, and regulatory compliance assessment for biotech applications.
                        </p>
                        <div class="coa-actions">
                            <button onclick="viewCOA('biotech')" class="btn btn-primary">View Full COA</button>
                            <button onclick="downloadCOA('biotech-intermediate')" class="btn btn-outline">Download PDF</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- COA Components -->
    <section class="coa-components">
        <div class="container">
            <h2 class="section-title">What's Included in Our COAs</h2>
            <div class="components-grid">
                <div class="component-card">
                    <div class="component-icon">📋</div>
                    <h3>Sample Information</h3>
                    <ul>
                        <li>Unique sample identification</li>
                        <li>Client information and batch details</li>
                        <li>Sample receipt and analysis dates</li>
                        <li>Storage conditions and handling notes</li>
                    </ul>
                </div>
                
                <div class="component-card">
                    <div class="component-icon">🔬</div>
                    <h3>Analytical Methods</h3>
                    <ul>
                        <li>Detailed method descriptions</li>
                        <li>Instrumentation specifications</li>
                        <li>Reference standards used</li>
                        <li>Quality control measures</li>
                    </ul>
                </div>
                
                <div class="component-card">
                    <div class="component-icon">📊</div>
                    <h3>Results & Data</h3>
                    <ul>
                        <li>Quantitative analytical results</li>
                        <li>Chromatograms and spectra</li>
                        <li>Statistical analysis where applicable</li>
                        <li>Uncertainty measurements</li>
                    </ul>
                </div>
                
                <div class="component-card">
                    <div class="component-icon">✅</div>
                    <h3>Professional Review</h3>
                    <ul>
                        <li>Expert interpretation of results</li>
                        <li>Compliance assessment</li>
                        <li>Recommendations and conclusions</li>
                        <li>Analyst signature and credentials</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- COA Formats -->
    <section class="coa-formats">
        <div class="container">
            <h2 class="section-title">COA Delivery Options</h2>
            <div class="formats-content">
                <div class="formats-info">
                    <h3>Multiple Format Options</h3>
                    <p>ZyntroTest provides Certificates of Analysis in various formats to meet your specific needs and regulatory requirements.</p>
                    
                    <div class="format-options">
                        <div class="format-option">
                            <div class="format-icon">📱</div>
                            <div class="format-content">
                                <strong>Digital Delivery</strong>
                                <span>Secure email with PDF attachments and raw data files</span>
                            </div>
                        </div>
                        <div class="format-option">
                            <div class="format-icon">🌐</div>
                            <div class="format-content">
                                <strong>Online Portal</strong>
                                <span>Access through our secure client portal with download options</span>
                            </div>
                        </div>
                        <div class="format-option">
                            <div class="format-icon">📄</div>
                            <div class="format-content">
                                <strong>Hard Copy</strong>
                                <span>Printed reports with official seals (available upon request)</span>
                            </div>
                        </div>
                        <div class="format-option">
                            <div class="format-icon">💾</div>
                            <div class="format-content">
                                <strong>Raw Data</strong>
                                <span>Original instrument files and analysis data packages</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="formats-visual">
                    <div class="delivery-timeline">
                        <div class="timeline-item">
                            <div class="timeline-icon">⏱️</div>
                            <div class="timeline-content">
                                <strong>Analysis Complete</strong>
                                <span>Within promised turnaround time</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-icon">📧</div>
                            <div class="timeline-content">
                                <strong>Digital Delivery</strong>
                                <span>COA emailed within 2 hours</span>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-icon">🔒</div>
                            <div class="timeline-content">
                                <strong>Secure Storage</strong>
                                <span>5+ years of data retention</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="coa-cta">
        <div class="container">
            <div class="cta-content">
                <h2>Ready for Professional LCMS Testing?</h2>
                <p>Get started with ZyntroTest's comprehensive analytical services. Contact us for a detailed quote and fast turnaround.</p>
                <div class="cta-actions">
                    <a href="contact.html" class="btn btn-primary btn-large">Request Quote</a>
                    <a href="sample-submission.html" class="btn btn-outline btn-large">Submit Samples</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal for COA Viewer -->
    <div id="coa-modal" class="coa-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Certificate of Analysis</h3>
                <button class="modal-close" onclick="closeCOAModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- COA content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button onclick="closeCOAModal()" class="btn btn-outline">Close</button>
                <button onclick="downloadCurrentCOA()" class="btn btn-primary">Download PDF</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <a href="index.html" class="logo">
                            <img src="images/zyntrotest-logo.svg" alt="ZyntroTest - Analytical Lab Solutions">
                        </a>
                    </div>
                    <p>Advanced LCMS testing for peptides, supplements, and biotech research. Delivering precision results nationwide.</p>
                </div>
                <div class="footer-section">
                    <h3>Services</h3>
                    <ul>
                        <li><a href="services.html#peptide">Peptide Purity Testing</a></li>
                        <li><a href="services.html#supplement">Supplement Screening</a></li>
                        <li><a href="services.html#hemp">Cannabis/Hemp Testing</a></li>
                        <li><a href="coa-samples.html">COA Samples</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="sample-submission.html">Submit Sample</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p><a href="contact.html">Get in Touch</a></p>
                    <p>College Station, Texas</p>
                </div>
            </div>
            <div class="footer-badges">
                <div class="badge">ISO 17025 in Progress</div>
                <div class="badge">Nationwide Results in Days</div>
                <div class="badge">Advanced DAD Technology</div>
            </div>
            <div class="footer-bottom">
                <div class="footer-social">
                    <a href="#" class="social-link">LinkedIn</a>
                    <a href="#" class="social-link">X (Twitter)</a>
                </div>
                <div class="footer-legal">
                    <p>&copy; 2024 ZyntroTest. All rights reserved. | <a href="#privacy">Privacy Policy</a> | <a href="#terms">Terms of Service</a></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/script.js"></script>
    <style>
        /* Additional styles for COA samples page */
        .coa-header {
            padding: 8rem 0 4rem;
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
            text-align: center;
        }

        .coa-header-content h1 {
            margin-bottom: var(--space-lg);
            color: var(--gray-900);
        }

        .coa-header-content p {
            font-size: 1.125rem;
            color: var(--gray-600);
            max-width: 800px;
            margin: 0 auto;
        }

        .coa-overview {
            padding: var(--space-3xl) 0;
            background: var(--white);
        }

        .overview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .overview-content h2 {
            margin-bottom: var(--space-lg);
            color: var(--gray-900);
        }

        .coa-features {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .feature {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .feature-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .feature-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .feature-content strong {
            color: var(--gray-900);
            font-size: 1.125rem;
        }

        .feature-content span {
            color: var(--gray-600);
        }

        .coa-preview-large {
            display: flex;
            justify-content: center;
        }

        .preview-document {
            width: 100%;
            max-width: 400px;
            background: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-2xl);
            overflow: hidden;
            border: 2px solid var(--gray-200);
        }

        .doc-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            color: var(--white);
            padding: 1.5rem;
            text-align: center;
        }

        .lab-logo {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .doc-title {
            font-size: 1rem;
            opacity: 0.9;
        }

        .doc-content {
            padding: 1.5rem;
        }

        .sample-info {
            margin-bottom: 1.5rem;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-row .label {
            font-weight: 600;
            color: var(--gray-700);
        }

        .info-row .value {
            color: var(--gray-900);
            font-weight: 500;
        }

        .results-section {
            margin-bottom: 1.5rem;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            align-items: center;
        }

        .test-name {
            color: var(--gray-700);
            font-weight: 500;
        }

        .result-value {
            font-weight: 700;
            color: var(--primary-blue);
            font-size: 1.125rem;
        }

        .chromatogram-preview {
            background: var(--gray-50);
            padding: 1rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--gray-200);
        }

        .chart-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 0.75rem;
            text-align: center;
        }

        .chart-visual {
            height: 60px;
        }

        .chart-svg {
            width: 100%;
            height: 100%;
        }

        .sample-coas {
            padding: var(--space-3xl) 0;
            background: var(--gray-50);
        }

        .coa-grid {
            display: grid;
            gap: 3rem;
        }

        .coa-card {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 2rem;
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius-2xl);
            box-shadow: var(--shadow-lg);
            border: 2px solid var(--gray-200);
            transition: var(--transition-base);
        }

        .coa-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .coa-thumbnail {
            width: 280px;
            height: 360px;
            flex-shrink: 0;
        }

        .thumbnail-content {
            width: 100%;
            height: 100%;
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            border: 2px solid var(--gray-200);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .thumb-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            color: var(--white);
            padding: 1rem;
            text-align: center;
        }

        .thumb-logo {
            font-weight: 700;
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }

        .thumb-title {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .thumb-body {
            padding: 1rem;
        }

        .thumb-info {
            margin-bottom: 1rem;
            text-align: center;
        }

        .thumb-info strong {
            display: block;
            font-size: 1rem;
            color: var(--gray-900);
            margin-bottom: 0.25rem;
        }

        .thumb-info span {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .thumb-results {
            margin-bottom: 1rem;
        }

        .thumb-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            background: var(--white);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .thumb-result.status-pass {
            color: var(--secondary-green);
            font-weight: 600;
        }

        .thumb-chart {
            height: 60px;
            background: var(--white);
            border-radius: var(--radius-md);
            padding: 0.5rem;
            border: 1px solid var(--gray-200);
        }

        .mini-chart {
            width: 100%;
            height: 100%;
        }

        .coa-info h3 {
            color: var(--gray-900);
            margin-bottom: 1rem;
        }

        .coa-details {
            margin-bottom: 1.5rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-item strong {
            color: var(--gray-700);
            min-width: 120px;
        }

        .detail-item span {
            color: var(--gray-900);
            font-weight: 500;
        }

        .result-highlight {
            color: var(--primary-blue) !important;
            font-weight: 600 !important;
        }

        .result-highlight.status-pass {
            color: var(--secondary-green) !important;
        }

        .coa-description {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .coa-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .coa-components {
            padding: var(--space-3xl) 0;
            background: var(--white);
        }

        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .component-card {
            background: var(--gray-50);
            padding: 2rem;
            border-radius: var(--radius-xl);
            border: 2px solid var(--gray-200);
            text-align: center;
            transition: var(--transition-base);
        }

        .component-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .component-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .component-card h3 {
            color: var(--gray-900);
            margin-bottom: 1rem;
        }

        .component-card ul {
            list-style: none;
            padding: 0;
            text-align: left;
        }

        .component-card li {
            margin-bottom: 0.5rem;
            color: var(--gray-700);
            padding-left: 1rem;
            position: relative;
        }

        .component-card li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--primary-blue);
            font-weight: 700;
        }

        .coa-formats {
            padding: var(--space-3xl) 0;
            background: var(--gray-50);
        }

        .formats-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .formats-info h3 {
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .format-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .format-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--white);
            border-radius: var(--radius-lg);
            border: 2px solid var(--gray-200);
        }

        .format-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .format-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .format-content strong {
            color: var(--gray-900);
        }

        .format-content span {
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        .delivery-timeline {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .timeline-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .timeline-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .timeline-content strong {
            color: var(--gray-900);
        }

        .timeline-content span {
            color: var(--gray-600);
        }

        .coa-cta {
            padding: var(--space-3xl) 0;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            color: var(--white);
            text-align: center;
        }

        .coa-cta h2 {
            color: var(--white);
            margin-bottom: var(--space-md);
        }

        .coa-cta p {
            font-size: 1.25rem;
            margin-bottom: var(--space-xl);
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: var(--space-lg);
            flex-wrap: wrap;
        }

        .coa-cta .btn-primary {
            background: var(--white);
            color: var(--primary-blue);
        }

        .coa-cta .btn-outline {
            background: transparent;
            color: var(--white);
            border-color: var(--white);
        }

        .pilot-benefits {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .benefit {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* COA Modal */
        .coa-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
        }

        .modal-content {
            background: var(--white);
            margin: 5% auto;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-2xl);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-green));
            color: var(--white);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        /* COA Search Styling */
        .coa-search-form {
            max-width: 800px;
            margin: 2rem auto 0;
            padding: 2rem;
            background: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
        }
        
        .form-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .coa-search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            transition: var(--transition-base);
        }
        
        .coa-search-input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .search-help {
            background: var(--gray-50);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--primary-blue);
        }
        
        .search-help p {
            margin-bottom: 0.75rem;
            color: var(--gray-700);
        }
        
        .search-help ul {
            margin: 0;
            color: var(--gray-600);
        }
        
        .search-help li {
            margin-bottom: 0.5rem;
        }
        
        .search-help a {
            color: var(--primary-blue);
            text-decoration: none;
        }
        
        .coa-results {
            padding: var(--space-xl) 0;
            background: var(--white);
        }
        
        .sample-coas-section {
            background: var(--gray-50);
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--gray-600);
            font-size: 1.125rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 768px) {
            .form-group {
                flex-direction: column;
            }
            
            .coa-search-form {
                padding: 1.5rem;
                margin: 1.5rem auto 0;
            }
            
            .overview-grid,
            .formats-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .coa-card {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .coa-thumbnail {
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
            }

            .components-grid {
                grid-template-columns: 1fr;
            }

            .pilot-benefits {
                flex-direction: column;
                gap: 0.5rem;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
                max-height: 70vh;
            }
        }
    </style>

    <script>
        // COA Modal Functions
        function viewCOA(type) {
            const modal = document.getElementById('coa-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            
            let content = '';
            
            switch(type) {
                case 'peptide':
                    title.textContent = 'BPC-157 Peptide - Certificate of Analysis';
                    content = generatePeptideCOA();
                    break;
                case 'supplement':
                    title.textContent = 'Pre-Workout Supplement - Certificate of Analysis';
                    content = generateSupplementCOA();
                    break;
                case 'biotech':
                    title.textContent = 'Pharmaceutical Intermediate - Certificate of Analysis';
                    content = generateBiotechCOA();
                    break;
            }
            
            body.innerHTML = content;
            modal.style.display = 'block';
            
            // Track view event
            if (typeof trackEvent === 'function') {
                trackEvent('COA View', 'COA Samples', type);
            }
        }
        
        function closeCOAModal() {
            document.getElementById('coa-modal').style.display = 'none';
        }
        
        function downloadCOA(filename) {
            // Extract COA ID from filename for real downloads
            let coaId = '';
            if (filename === 'peptide-bpc157') {
                coaId = 'ZT-2024-001';
            } else if (filename === 'supplement-preworkout') {
                coaId = 'ZT-2024-025';
            } else if (filename === 'biotech-intermediate') {
                coaId = 'ZT-2024-050';
            }
            
            if (coaId) {
                downloadCOAPDF(coaId);
            } else {
                showNotification(`Sample COA download - This is a demo functionality.`, 'info');
            }
            
            // Track download event
            if (typeof trackEvent === 'function') {
                trackEvent('COA Download', 'COA Samples', filename);
            }
        }
        
        function downloadCurrentCOA() {
            const title = document.getElementById('modal-title').textContent;
            
            // Determine COA ID from modal title
            let coaId = '';
            if (title.includes('BPC-157')) {
                coaId = 'ZT-2024-001';
            } else if (title.includes('Pre-Workout')) {
                coaId = 'ZT-2024-025';
            } else if (title.includes('Pharmaceutical Intermediate')) {
                coaId = 'ZT-2024-050';
            }
            
            if (coaId) {
                downloadCOAPDF(coaId);
            } else {
                showNotification(`Downloading ${title} - This is a demo functionality.`, 'info');
            }
            
            closeCOAModal();
        }
        
        // Generate mock COA content
        function generatePeptideCOA() {
            return `
                <div class="full-coa-content">
                    <div class="coa-section">
                        <h3>Sample Information</h3>
                        <div class="info-table">
                            <div class="info-row">
                                <span class="label">Sample ID:</span>
                                <span class="value">ZT-2024-001</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Client:</span>
                                <span class="value">BioVenture Research</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Compound:</span>
                                <span class="value">BPC-157 (Body Protective Compound)</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Batch Number:</span>
                                <span class="value">BPC-240901</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Date Received:</span>
                                <span class="value">October 1, 2024</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Date Analyzed:</span>
                                <span class="value">October 3, 2024</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Analytical Results</h3>
                        <div class="results-table">
                            <div class="result-row">
                                <span class="test">Purity (HPLC)</span>
                                <span class="result">99.8%</span>
                                <span class="spec">≥95%</span>
                                <span class="status pass">PASS</span>
                            </div>
                            <div class="result-row">
                                <span class="test">Molecular Weight (MS)</span>
                                <span class="result">1419.6 Da</span>
                                <span class="spec">1419.5 ± 1.0</span>
                                <span class="status pass">PASS</span>
                            </div>
                            <div class="result-row">
                                <span class="test">Water Content (KF)</span>
                                <span class="result">2.3%</span>
                                <span class="spec">≤5%</span>
                                <span class="status pass">PASS</span>
                            </div>
                            <div class="result-row">
                                <span class="test">Acetate Content</span>
                                <span class="result">8.2%</span>
                                <span class="spec">5-15%</span>
                                <span class="status pass">PASS</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Impurity Profile</h3>
                        <div class="impurity-table">
                            <div class="imp-row">
                                <span class="retention">RT 12.5 min</span>
                                <span class="area">0.12%</span>
                                <span class="identification">Unknown Impurity A</span>
                            </div>
                            <div class="imp-row">
                                <span class="retention">RT 18.9 min</span>
                                <span class="area">0.05%</span>
                                <span class="identification">Deletion Sequence</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Conclusion</h3>
                        <p>The analyzed BPC-157 sample meets all specified requirements with exceptional purity (99.8%). The peptide shows correct molecular weight and acceptable water content. Minor impurities are within acceptable limits for research use.</p>
                    </div>
                    
                    <div class="coa-signature">
                        <p><strong>Analyzed by:</strong> Dr. Sarah Johnson, Ph.D.<br>
                        <strong>Date:</strong> October 3, 2024<br>
                        <strong>ZyntroTest Laboratory</strong></p>
                    </div>
                </div>
            `;
        }
        
        function generateSupplementCOA() {
            return `
                <div class="full-coa-content">
                    <div class="coa-section">
                        <h3>Sample Information</h3>
                        <div class="info-table">
                            <div class="info-row">
                                <span class="label">Sample ID:</span>
                                <span class="value">ZT-2024-025</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Client:</span>
                                <span class="value">NutriPure Supplements</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Product:</span>
                                <span class="value">Pre-Workout Formula</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Lot Number:</span>
                                <span class="value">PWO-241002</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Adulterant Screening Results</h3>
                        <div class="screening-results">
                            <div class="screen-category">
                                <h4>PDE-5 Inhibitors</h4>
                                <div class="screen-result pass">✓ Not Detected</div>
                                <ul class="tested-compounds">
                                    <li>Sildenafil - Not Detected (LOD: 1 ppm)</li>
                                    <li>Tadalafil - Not Detected (LOD: 1 ppm)</li>
                                    <li>Vardenafil - Not Detected (LOD: 1 ppm)</li>
                                </ul>
                            </div>
                            
                            <div class="screen-category">
                                <h4>Stimulants</h4>
                                <div class="screen-result pass">✓ Declared Only</div>
                                <ul class="tested-compounds">
                                    <li>Caffeine - 150 mg (Declared: 150 mg)</li>
                                    <li>Synephrine - Not Detected</li>
                                    <li>DMAA - Not Detected (LOD: 0.5 ppm)</li>
                                </ul>
                            </div>
                            
                            <div class="screen-category">
                                <h4>Other Pharmaceuticals</h4>
                                <div class="screen-result pass">✓ Not Detected</div>
                                <ul class="tested-compounds">
                                    <li>Sibutramine - Not Detected (LOD: 1 ppm)</li>
                                    <li>Phenolphthalein - Not Detected</li>
                                    <li>Fluoxetine - Not Detected</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Conclusion</h3>
                        <p><strong>PASS</strong> - No undeclared pharmaceutical adulterants detected. The supplement contains only declared ingredients within acceptable ranges. The product meets safety requirements for consumer use.</p>
                    </div>
                </div>
            `;
        }
        
        function generateBiotechCOA() {
            return `
                <div class="full-coa-content">
                    <div class="coa-section">
                        <h3>Sample Information</h3>
                        <div class="info-table">
                            <div class="info-row">
                                <span class="label">Sample ID:</span>
                                <span class="value">ZT-2024-050</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Client:</span>
                                <span class="value">Apex Biotechnology</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Compound:</span>
                                <span class="value">API Intermediate X-47B</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Stage:</span>
                                <span class="value">Phase II Development</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Purity and Impurity Profile</h3>
                        <div class="purity-results">
                            <div class="main-component">
                                <h4>Main Component</h4>
                                <div class="component-result">98.2%</div>
                                <div class="component-spec">≥97.0%</div>
                                <div class="component-status pass">PASS</div>
                            </div>
                            
                            <div class="impurities-list">
                                <h4>Identified Impurities</h4>
                                <div class="impurity-item">
                                    <span class="imp-name">Impurity A (Starting Material)</span>
                                    <span class="imp-level">0.8%</span>
                                    <span class="imp-limit">≤1.0%</span>
                                    <span class="imp-status pass">PASS</span>
                                </div>
                                <div class="impurity-item">
                                    <span class="imp-name">Impurity B (Process Related)</span>
                                    <span class="imp-level">0.7%</span>
                                    <span class="imp-limit">≤1.0%</span>
                                    <span class="imp-status pass">PASS</span>
                                </div>
                                <div class="impurity-item">
                                    <span class="imp-name">Unknown Impurity C</span>
                                    <span class="imp-level">0.3%</span>
                                    <span class="imp-limit">≤0.5%</span>
                                    <span class="imp-status pass">PASS</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Structural Confirmation</h3>
                        <div class="structural-data">
                            <div class="data-point">
                                <strong>Molecular Ion [M+H]+:</strong> 487.2 m/z (Expected: 487.2)
                            </div>
                            <div class="data-point">
                                <strong>Fragmentation Pattern:</strong> Consistent with expected structure
                            </div>
                            <div class="data-point">
                                <strong>Retention Time:</strong> 15.8 min (Reference: 15.8 ± 0.2 min)
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Regulatory Assessment</h3>
                        <p>The analyzed intermediate meets ICH Q3A(R2) guidelines for impurities. All identified impurities are below qualification thresholds. The material is suitable for continued pharmaceutical development.</p>
                    </div>
                </div>
            `;
        }
        
        // Initialize Supabase for COA search
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Load Supabase if not already loaded
                if (!window.supabase) {
                    const script = document.createElement('script');
                    script.src = 'https://unpkg.com/@supabase/supabase-js@2.39.3/dist/umd/supabase.js';
                    script.onload = () => {
                        // Initialize Supabase client for public access
                        window.supabaseClient = window.supabase.createClient(
                            'https://hctdzwmlkgnuxcuhjooe.supabase.co',
                            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjdGR6d21sa2dudXhjdWhqb29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMjE2NjAsImV4cCI6MjA3NTY5NzY2MH0.EzxFceWzutTtlJvKpzI5UbWug3B8o2e5hFWi0yaXHog'
                        );
                        console.log('Supabase initialized for public COA search');
                    };
                    document.head.appendChild(script);
                } else {
                    // Supabase already loaded
                    window.supabaseClient = window.supabase.createClient(
                        'https://hctdzwmlkgnuxcuhjooe.supabase.co',
                        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjdGR6d21sa2dudXhjdWhqb29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMjE2NjAsImV4cCI6MjA3NTY5NzY2MH0.EzxFceWzutTtlJvKpzI5UbWug3B8o2e5hFWi0yaXHog'
                    );
                }
            } catch (error) {
                console.warn('Failed to initialize Supabase for COA search:', error);
            }
        });
        
        // COA Search Functionality
        function searchCOA(event) {
            event.preventDefault();
            const coaNumber = document.getElementById('coa-number').value.trim();
            
            if (!coaNumber) {
                showNotification('Please enter a COA number', 'error');
                return;
            }
            
            // Show loading state
            const button = event.target.querySelector('button[type="submit"]');
            const originalText = button.textContent;
            button.textContent = 'Searching...';
            button.disabled = true;
            
            // Search database (now using Supabase)
            setTimeout(async () => {
                try {
                    const coa = await findCOAInDatabase(coaNumber);
                    
                    if (coa) {
                        displayCOAResults(coa);
                        showNotification('COA found successfully!', 'success');
                    } else {
                        showNotification('COA not found. Please check the number and try again.', 'error');
                    }
                } catch (error) {
                    console.error('Search error:', error);
                    showNotification('Error searching for COA. Please try again.', 'error');
                }
                
                // Reset button
                button.textContent = originalText;
                button.disabled = false;
            }, 1000);
        }
        
        async function findCOAInDatabase(coaNumber) {
            // First try to load from Supabase database
            try {
                if (typeof window.supabaseClient !== 'undefined' && window.supabaseClient) {
                    console.log('Searching Supabase for COA:', coaNumber);
                    const { data, error } = await window.supabaseClient
                        .rpc('get_coa_by_id', { coa_id: coaNumber.toUpperCase() });
                    
                    console.log('Supabase search result:', { data, error });
                    
                    if (!error && data && data.length > 0) {
                        console.log('Found COA in Supabase:', data[0]);
                        return data[0];
                    }
                    
                    if (error) {
                        console.error('Supabase search error:', error);
                    }
                }
            } catch (error) {
                console.warn('Error loading COAs from Supabase:', error);
            }
            
            // Fallback: try localStorage from admin dashboard
            try {
                const adminCOAs = localStorage.getItem('zyntro_config_coa_database');
                if (adminCOAs) {
                    const parsedCOAs = JSON.parse(adminCOAs);
                    const foundCOA = parsedCOAs[coaNumber.toUpperCase()];
                    if (foundCOA) {
                        return foundCOA;
                    }
                }
            } catch (error) {
                console.warn('Error loading admin COAs from localStorage:', error);
            }
            
            // Fallback to original hardcoded database for demo purposes
            const fallbackDatabase = {
                'ZT-2024-001': {
                    id: 'ZT-2024-001',
                    client: 'BioVenture Research',
                    compound: 'BPC-157',
                    date: 'October 1, 2024',
                    purity: '99.8%',
                    type: 'Peptide Analysis',
                    status: 'Complete'
                },
                'ZT-2024-025': {
                    id: 'ZT-2024-025',
                    client: 'NutriPure Supplements',
                    compound: 'Pre-Workout Formula',
                    date: 'October 5, 2024',
                    result: 'PASS - No Adulterants',
                    type: 'Supplement Screening',
                    status: 'Complete'
                },
                'ZT-2024-050': {
                    id: 'ZT-2024-050',
                    client: 'Apex Biotechnology',
                    compound: 'API Intermediate X-47B',
                    date: 'October 3, 2024',
                    purity: '98.2%',
                    type: 'Biotech Analysis',
                    status: 'Complete'
                }
            };
            
            return fallbackDatabase[coaNumber.toUpperCase()] || null;
        }
        
        function displayCOAResults(coa) {
            const resultsSection = document.getElementById('search-results');
            const coaContent = document.getElementById('coa-content');
            
            console.log('Displaying COA results for:', coa);
            
            // Generate content based on actual COA data
            const contentHTML = generateRealCOAContent(coa);
            
            coaContent.innerHTML = contentHTML;
            resultsSection.style.display = 'block';
            
            // Scroll to results
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Generate COA content from real database data
        function generateRealCOAContent(coa) {
            return `
                <div class="full-coa-content">
                    <div class="coa-section">
                        <h3>Sample Information</h3>
                        <div class="info-table">
                            <div class="info-row">
                                <span class="label">COA ID:</span>
                                <span class="value">${coa.id}</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Client:</span>
                                <span class="value">${coa.client}</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Compound:</span>
                                <span class="value">${coa.compound}</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Analysis Type:</span>
                                <span class="value">${coa.type}</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Test Date:</span>
                                <span class="value">${coa.date}</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Status:</span>
                                <span class="value status-${coa.status.toLowerCase()}">${coa.status}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Analytical Results</h3>
                        <div class="results-table">
                            ${coa.purity ? `
                                <div class="result-row">
                                    <span class="test">Purity</span>
                                    <span class="result">${coa.purity}</span>
                                    <span class="status pass">PASS</span>
                                </div>
                            ` : ''}
                            
                            ${coa.result ? `
                                <div class="result-row">
                                    <span class="test">Test Result</span>
                                    <span class="result">${coa.result}</span>
                                    <span class="status pass">PASS</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    
                    <div class="coa-section">
                        <h3>Conclusion</h3>
                        <p>The analyzed sample <strong>${coa.compound}</strong> has been tested using <strong>${coa.type}</strong> methods. 
                        ${coa.purity ? `The sample shows purity of ${coa.purity}.` : ''}
                        ${coa.result ? `Result: ${coa.result}.` : ''}
                        The sample ${coa.status === 'Complete' ? 'meets all specified requirements' : 'is under analysis'}.</p>
                        
                        ${coa.notes ? `
                            <div class="additional-notes">
                                <h4>Additional Notes</h4>
                                <p>${coa.notes}</p>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="coa-signature">
                        <p><strong>Analysis completed by ZyntroTest Laboratory</strong><br>
                        <strong>Certificate ID:</strong> ${coa.id}<br>
                        <strong>Generated:</strong> ${new Date().toLocaleDateString()}</p>
                        
                        <div class="download-section" style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e5e7eb;">
                            <p><strong>Full PDF Report Available</strong></p>
                            <p>Download the complete Certificate of Analysis with detailed analytical data, chromatograms, and professional interpretation.</p>
                            <div style="margin-top: 1rem;">
                                <button onclick="downloadCOAPDF('${coa.id}')" class="btn btn-primary" style="margin-right: 1rem;">Download PDF Report</button>
                                <small style="color: #6b7280;">Complete analytical documentation • Professional format • Regulatory compliant</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <style>
                .info-table, .results-table {
                    width: 100%;
                    margin-bottom: 2rem;
                }
                
                .info-row, .result-row {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 0.75rem 0;
                    border-bottom: 1px solid #e5e7eb;
                }
                
                .info-row:last-child, .result-row:last-child {
                    border-bottom: none;
                }
                
                .label, .test {
                    font-weight: 600;
                    color: #374151;
                }
                
                .value, .result {
                    font-weight: 500;
                    color: #111827;
                }
                
                .status {
                    padding: 0.25rem 0.75rem;
                    border-radius: 0.375rem;
                    font-size: 0.875rem;
                    font-weight: 600;
                    text-transform: uppercase;
                }
                
                .status.pass, .status-complete {
                    background-color: #d1fae5;
                    color: #065f46;
                }
                
                .status-pending {
                    background-color: #fef3c7;
                    color: #92400e;
                }
                
                .status-in-progress {
                    background-color: #dbeafe;
                    color: #1e40af;
                }
                
                .coa-section {
                    margin-bottom: 2rem;
                    padding-bottom: 2rem;
                    border-bottom: 2px solid #f3f4f6;
                }
                
                .coa-section:last-child {
                    border-bottom: none;
                }
                
                .coa-section h3 {
                    color: #111827;
                    margin-bottom: 1rem;
                    font-size: 1.25rem;
                }
                
                .additional-notes h4 {
                    color: #374151;
                    margin: 1rem 0 0.5rem 0;
                }
                
                .download-section {
                    background: #f9fafb;
                    padding: 1.5rem;
                    border-radius: 0.5rem;
                }
                
                .download-section a {
                    color: #2563eb;
                    text-decoration: none;
                }
                
                .download-section a:hover {
                    text-decoration: underline;
                }
                </style>
            `;
        }
        
        // Download actual PDF from Supabase Storage
        async function downloadCOAPDF(coaId) {
            try {
                console.log('Downloading PDF for COA:', coaId);
                
                // Show loading state
                let downloadButton = null;
                let originalText = 'Download PDF Report';
                
                if (event && event.target) {
                    downloadButton = event.target;
                    originalText = downloadButton.textContent;
                    downloadButton.textContent = 'Downloading...';
                    downloadButton.disabled = true;
                }
                
                // First, get the COA data to find the file URL
                const coa = await findCOAInDatabase(coaId);
                
                if (!coa) {
                    throw new Error('COA not found');
                }
                
                // Try to get file URL from COA data or construct it
                let fileUrl = null;
                
                // If we have a direct file URL from the database
                if (coa.file_url || coa.fileUrl) {
                    fileUrl = coa.file_url || coa.fileUrl;
                } else {
                    // Try to get file from Supabase Storage by querying the database
                    if (window.supabaseClient) {
                        const { data: coaData, error } = await window.supabaseClient
                            .from('coas')
                            .select('file_url, file_path, file_name')
                            .eq('id', coaId.toUpperCase())
                            .single();
                        
                        if (!error && coaData) {
                            fileUrl = coaData.file_url;
                            
                            // If no direct URL, try to construct from file path
                            if (!fileUrl && coaData.file_path) {
                                const { data } = window.supabaseClient.storage
                                    .from('coa-files')
                                    .getPublicUrl(coaData.file_path);
                                fileUrl = data.publicUrl;
                            }
                        }
                    }
                }
                
                if (!fileUrl) {
                    throw new Error('PDF file not found for this COA');
                }
                
                console.log('Downloading PDF from URL:', fileUrl);
                
                // Create a temporary link to download the file
                const link = document.createElement('a');
                link.href = fileUrl;
                link.download = `COA_${coaId}.pdf`;
                link.target = '_blank';
                
                // Add to DOM, click, and remove
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification(`Downloading COA ${coaId} PDF report`, 'success');
                
                // Track download event
                if (typeof trackEvent === 'function') {
                    trackEvent('COA PDF Download', 'Public Search', coaId);
                }
                
                // Reset button
                if (downloadButton) {
                    downloadButton.textContent = originalText;
                    downloadButton.disabled = false;
                }
                
            } catch (error) {
                console.error('PDF download error:', error);
                showNotification(`Error downloading PDF: ${error.message}`, 'error');
                
                // Reset button
                if (downloadButton) {
                    downloadButton.textContent = originalText;
                    downloadButton.disabled = false;
                }
            }
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('coa-modal');
            if (event.target == modal) {
                closeCOAModal();
            }
        }
    </script>
</body>
</html>