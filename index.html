<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Zyntro: Precision LCMS Testing Nationwide | Peptide & Supplement Analysis</title>
    <meta name="description" content="Zyntro provides high-accuracy LCMS testing for peptide purity, supplement safety, and biotech research. Texas-based lab with advanced Agilent LCMS and DAD technology.">
    <meta name="keywords" content="LCMS peptide testing, supplement COA lab, biotech testing lab, peptide purity analysis, LCMS Texas">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Zyntro: Precision LCMS Testing Nationwide">
    <meta property="og:description" content="Advanced LCMS testing for peptides, supplements, and biotech research. Professional COAs delivered in 3-5 days with Agilent LCMS-DAD technology.">
    <meta property="og:image" content="images/zyntrotest-social.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://zyntro.com">
    <meta property="og:site_name" content="Zyntro Laboratory">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Zyntro: Precision LCMS Testing Nationwide">
    <meta name="twitter:description" content="Advanced LCMS testing for peptides, supplements, and biotech research. Professional COAs delivered in 3-5 days.">
    <meta name="twitter:image" content="images/zyntrotest-social.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=20251021181055">
    <link rel="stylesheet" href="css/mobile-fixes.css?v=20251021181055">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-title">Precision LCMS Testing Nationwide</h1>
                    <p class="hero-subtitle">Fast, Reliable COAs for Peptides, Supplements, and Biotech Research</p>
                    <p class="hero-description">Advanced Agilent LCMS with diode array detection delivers precise results in days, not weeks. Trusted by researchers and e-commerce businesses across the United States.</p>
                    <div class="hero-stats">
                        <div class="stat">
                            <div class="stat-number">99.8%</div>
                            <div class="stat-label">Accuracy</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">3-5</div>
                            <div class="stat-label">Days TAT</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">500+</div>
                            <div class="stat-label">Tests/Month</div>
                        </div>
                    </div>
                    <div class="hero-cta">
                        <a href="contact.html" class="btn btn-primary btn-large">Request Analysis</a>
                        <a href="services.html" class="btn btn-outline btn-large">View Services</a>
                    </div>
                    <div class="hero-trust">
                        <span class="trust-text">Trusted by leading biotech companies</span>
                        <div class="trust-badges">
                            <div class="trust-badge">ISO 17025</div>
                            <div class="trust-badge">Nationwide</div>
                            <div class="trust-badge">Fast Results</div>
                        </div>
                    </div>
                </div>
                <div class="hero-image">
                    <div class="image-container">
                        <img src="https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2940&q=80" 
                             alt="Professional analytical chemistry laboratory with advanced instrumentation for LCMS testing" 
                             class="hero-main-image">
                        <div class="image-overlay">
                            <div class="overlay-content">
                                <div class="feature-highlight">
                                    <div class="highlight-icon">🔬</div>
                                    <div class="highlight-text">
                                        <strong>Advanced LCMS-DAD</strong>
                                        <span>Agilent Technology</span>
                                    </div>
                                </div>
                                <div class="feature-highlight">
                                    <div class="highlight-icon">⚡</div>
                                    <div class="highlight-text">
                                        <strong>Rapid Analysis</strong>
                                        <span>3-5 Day Turnaround</span>
                                    </div>
                                </div>
                                <div class="feature-highlight">
                                    <div class="highlight-icon">📊</div>
                                    <div class="highlight-text">
                                        <strong>Professional COAs</strong>
                                        <span>Detailed Reporting</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Overview Section -->
    <section class="overview">
        <div class="container">
            <div class="overview-content">
                    <h2>Trusted LCMS Testing Laboratory</h2>
                <p>Zyntro provides high-accuracy LCMS testing for peptide purity, supplement safety, and biotech research. Our Texas-based lab uses advanced Agilent LCMS with diode array detection for precise results delivered in days. Trusted by vendors and researchers, we offer COAs to meet regulatory and e-commerce needs.</p>
            </div>
        </div>
    </section>

    <!-- Services Snapshot -->
    <section class="services-snapshot">
        <div class="container">
            <h2 class="section-title">Our Testing Services</h2>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.169.659 1.591L19.8 14.5M14.25 3.104c.251.023.501.05.75.082M19.8 14.5l-2.6 2.6a2.25 2.25 0 0 1-1.591.659h-8.218a2.25 2.25 0 0 1-1.591-.659l-2.6-2.6a1.125 1.125 0 0 1-.329-.79V9.75A2.25 2.25 0 0 1 5.25 7.5h13.5A2.25 2.25 0 0 1 21 9.75v3.96c0 .296-.118.58-.329.79Z" />
                        </svg>
                    </div>
                    <h3>Peptide Purity Testing</h3>
                    <p>High-precision analysis for research peptides with detailed COAs for e-commerce and compliance.</p>
                    <div class="price-range">$200 per sample</div>
                    <a href="services.html#peptide" class="service-link">Learn More</a>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.169.659 1.591L19.8 14.5M14.25 3.104c.251.023.501.05.75.082M19.8 14.5l-2.6 2.6a2.25 2.25 0 0 1-1.591.659h-8.218a2.25 2.25 0 0 1-1.591-.659l-2.6-2.6a1.125 1.125 0 0 1-.329-.79V9.75A2.25 2.25 0 0 1 5.25 7.5h13.5A2.25 2.25 0 0 1 21 9.75v3.96c0 .296-.118.58-.329.79Z" />
                        </svg>
                    </div>
                    <h3>Supplement Adulterant Screening</h3>
                    <p>Detect contaminants and adulterants in nutraceuticals using advanced LCMS with DAD technology.</p>
                    <div class="price-range">$75 - $200 per sample</div>
                    <a href="services.html#supplement" class="service-link">Learn More</a>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.169.659 1.591L19.8 14.5M14.25 3.104c.251.023.501.05.75.082M19.8 14.5l-2.6 2.6a2.25 2.25 0 0 1-1.591.659h-8.218a2.25 2.25 0 0 1-1.591-.659l-2.6-2.6a1.125 1.125 0 0 1-.329-.79V9.75A2.25 2.25 0 0 1 5.25 7.5h13.5A2.25 2.25 0 0 1 21 9.75v3.96c0 .296-.118.58-.329.79Z" />
                        </svg>
                    </div>
                    <h3>Cannabis/Hemp Testing</h3>
                    <p>Compliance testing pending TDA registration</p>
                    <div class="price-range">$150 - $350 per sample</div>
                    <a href="services.html#hemp" class="service-link">Learn More</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Trust Signals -->
    <section class="trust-signals">
        <div class="container">
            <h2 class="section-title">Why Choose Zyntro?</h2>
            <div class="trust-grid">
                <div class="trust-badge">
                    <div class="badge-icon iso-badge">
                        <span class="badge-text">ISO</span>
                        <span class="badge-subtext">17025</span>
                    </div>
                    <h3>ISO 17025 Accreditation in Progress</h3>
                    <p>Meeting international standards for testing competence</p>
                </div>
                <div class="trust-badge">
                    <div class="badge-icon shipping-badge">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m6.75 4.5v-9.75m0 0H8.25m3.75 0h3.375M9 15.75H5.625c-.621 0-1.125-.504-1.125-1.125v-1.5c0-.621.504-1.125 1.125-1.125H9M12 9.75V8.25m0 0H8.25m3.75 0h3.375M12 9.75v-1.5m0 1.5H8.25" />
                        </svg>
                    </div>
                    <h3>Fast Nationwide Shipping</h3>
                    <p>Results delivered in days, not weeks</p>
                </div>
                <div class="trust-badge">
                    <div class="badge-icon tech-badge">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.169.659 1.591L19.8 14.5M14.25 3.104c.251.023.501.05.75.082M19.8 14.5l-2.6 2.6a2.25 2.25 0 0 1-1.591.659h-8.218a2.25 2.25 0 0 1-1.591-.659l-2.6-2.6a1.125 1.125 0 0 1-.329-.79V9.75A2.25 2.25 0 0 1 5.25 7.5h13.5A2.25 2.25 0 0 1 21 9.75v3.96c0 .296-.118.58-.329.79Z" />
                        </svg>
                    </div>
                    <h3>Advanced DAD Technology</h3>
                    <p>Cutting-edge diode array detection for superior accuracy</p>
                </div>
            </div>
                <div class="coa-preview">
                <h3>Sample Certificate of Analysis</h3>
                
                <!-- Status indicator -->
                <div id="cms-status" style="padding: 1rem; margin: 1rem 0; background: #fef3c7; border-radius: 0.5rem; font-size: 0.9rem; color: #92400e;">
                    🔄 Loading COA data...
                </div>
                
                <!-- PDF Preview Section - Enhanced for all devices with fallbacks -->
                <div id="pdf-preview-section" style="margin-top: 2rem; display: none;">
                    <div class="pdf-preview-container">
                        <!-- Primary PDF Viewer (iframe) -->
                        <div id="iframe-pdf-viewer" style="display: block;">
                            <iframe id="pdf-viewer" class="pdf-iframe" 
                                    style="width: 100%; height: 600px; border: 2px solid #e5e7eb; border-radius: 0.5rem; background: #f8fafc;"
                                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                                    loading="lazy">
                            </iframe>
                        </div>
                        
                        <!-- Alternative PDF Viewer (object/embed) -->
                        <div id="object-pdf-viewer" style="display: none;">
                            <object id="pdf-object" class="pdf-iframe" 
                                    style="width: 100%; height: 600px; border: 2px solid #e5e7eb; border-radius: 0.5rem; background: #f8fafc;"
                                    type="application/pdf">
                            </object>
                        </div>
                        
                        <!-- PDF.js Viewer Fallback -->
                        <div id="pdfjs-viewer" style="display: none;">
                            <iframe id="pdfjs-iframe" class="pdf-iframe" 
                                    style="width: 100%; height: 600px; border: 2px solid #e5e7eb; border-radius: 0.5rem; background: #f8fafc;"
                                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
                            </iframe>
                        </div>
                        
                        <!-- Browser Blocked Message -->
                        <div id="pdf-blocked-message" style="display: none; text-align: center; padding: 2rem; background: #fef3c7; border-radius: 0.5rem; margin-top: 1rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">🚫</div>
                            <h3 style="color: #92400e; margin-bottom: 1rem;">PDF Preview Blocked by Browser</h3>
                            <p style="color: #92400e; font-size: 1rem; margin: 0 0 1.5rem 0;">
                                Your browser is blocking the PDF preview for security reasons. This is common in Microsoft Edge and other browsers.
                            </p>
                            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                <a href="#" id="pdf-direct-link" class="btn btn-primary" style="display: inline-block;">
                                    📄 Open PDF in New Tab
                                </a>
                                <a href="#" id="pdf-download-link" class="btn btn-outline" style="display: inline-block;">
                                    💾 Download PDF
                                </a>
                            </div>
                            <p style="color: #92400e; font-size: 0.875rem; margin: 1.5rem 0 0 0;">
                                Or contact <a href="mailto:info@zyntrotest.com" style="color: #2563eb; text-decoration: underline;">info@zyntrotest.com</a> for assistance.
                            </p>
                        </div>
                        
                        <!-- General Error Message -->
                        <div id="pdf-error-message" style="display: none; text-align: center; padding: 2rem; background: #fef3c7; border-radius: 0.5rem; margin-top: 1rem;">
                            <p style="color: #92400e; font-size: 1rem; margin: 0 0 1rem 0;">
                                ⚠️ Unable to load PDF preview. 
                            </p>
                            <a href="#" id="pdf-direct-link-2" class="btn btn-primary" style="display: inline-block; margin: 0.5rem;">
                                📄 Open PDF in New Tab
                            </a>
                            <p style="color: #92400e; font-size: 0.875rem; margin: 1rem 0 0 0;">
                                Or contact <a href="mailto:info@zyntrotest.com" style="color: #2563eb; text-decoration: underline;">info@zyntrotest.com</a> for assistance.
                            </p>
                        </div>
                        
                        <!-- Loading Message -->
                        <div id="pdf-loading-message" style="display: none; text-align: center; padding: 2rem; background: #f0f9ff; border-radius: 0.5rem; margin-top: 1rem;">
                            <div style="font-size: 2rem; margin-bottom: 1rem;">📄</div>
                            <p style="color: #0369a1; font-size: 1rem; margin: 0;">
                                Loading PDF preview...
                            </p>
                        </div>
                    </div>
                </div>
                
                <a href="search.html" class="btn btn-outline">Search COAs</a>
                
                <script>
                // Robust PDF URL resolution function (from search page)
                function getProperFileUrl(coa) {
                    // Accept BOTH local file paths AND Supabase storage URLs
                    // Priority order:
                    // 1. fileUrl field (direct URL or local path)
                    // 2. file_url field (legacy format)
                    // 3. fileName field (local path)
                    
                    let fileUrl = coa.fileUrl || coa.file_url || coa.fileName;
                    
                    if (fileUrl) {
                        // Case 1: Supabase storage URL (contains supabase)
                        if (fileUrl.includes('supabase.co') || fileUrl.includes('supabase.in')) {
                            console.log('Using Supabase storage URL:', fileUrl);
                            return fileUrl;
                        }
                        
                        // Case 2: Local file path - Fix path if it doesn't start with ./
                        if (fileUrl.startsWith('COAs/')) {
                            fileUrl = './' + fileUrl;
                        }
                        
                        // Case 3: Validate local path format
                        if (fileUrl.startsWith('./COAs/') || fileUrl.startsWith('COAs/')) {
                            console.log('Using local file path:', fileUrl);
                            return fileUrl;
                        }
                        
                        // Case 4: Absolute URL (http/https)
                        if (fileUrl.startsWith('http://') || fileUrl.startsWith('https://')) {
                            console.log('Using absolute URL:', fileUrl);
                            return fileUrl;
                        }
                        
                        // Unknown format - log warning but try to use it anyway
                        console.warn('Unknown file URL format, attempting to use:', fileUrl);
                        return fileUrl;
                    }
                    
                    return null;
                }

                // Advanced PDF loading with multiple fallback strategies
                async function loadPDFWithFallbacks(pdfViewer, fileUrl, maxRetries = 3) {
                    console.log('🔍 TROUBLESHOOTING: Starting loadPDFWithFallbacks with URL:', fileUrl);
                    
                    const pdfError = document.getElementById('pdf-error-message');
                    const pdfLoading = document.getElementById('pdf-loading-message');
                    const pdfBlocked = document.getElementById('pdf-blocked-message');
                    const iframeViewer = document.getElementById('iframe-pdf-viewer');
                    const objectViewer = document.getElementById('object-pdf-viewer');
                    const pdfjsViewer = document.getElementById('pdfjs-viewer');
                    const pdfObject = document.getElementById('pdf-object');
                    const pdfjsIframe = document.getElementById('pdfjs-iframe');
                    
                    console.log('🔍 TROUBLESHOOTING: PDF elements found:', {
                        pdfError: !!pdfError,
                        pdfLoading: !!pdfLoading,
                        pdfBlocked: !!pdfBlocked,
                        iframeViewer: !!iframeViewer,
                        objectViewer: !!objectViewer,
                        pdfjsViewer: !!pdfjsViewer,
                        pdfObject: !!pdfObject,
                        pdfjsIframe: !!pdfjsIframe,
                        pdfViewer: !!pdfViewer
                    });
                    
                    // Show loading message
                    if (pdfLoading) {
                        pdfLoading.style.display = 'block';
                        console.log('🔍 TROUBLESHOOTING: Loading message displayed');
                    }
                    if (pdfError) pdfError.style.display = 'none';
                    if (pdfBlocked) pdfBlocked.style.display = 'none';
                    
                    console.log('🔍 TROUBLESHOOTING: Starting advanced PDF load with URL:', fileUrl);
                    
                    // Set up direct links for fallback
                    const directLink = document.getElementById('pdf-direct-link');
                    const directLink2 = document.getElementById('pdf-direct-link-2');
                    const downloadLink = document.getElementById('pdf-download-link');
                    
                    if (directLink) directLink.href = fileUrl;
                    if (directLink2) directLink2.href = fileUrl;
                    if (downloadLink) downloadLink.href = fileUrl;
                    
                    // Approach 1: Standard iframe (works in most browsers)
                    try {
                        console.log('🔍 TROUBLESHOOTING: Trying standard iframe approach...');
                        console.log('🔍 TROUBLESHOOTING: Setting iframe src to:', fileUrl);
                        pdfViewer.src = fileUrl;
                        
                        // Set up event handlers
                        pdfViewer.onload = function() {
                            console.log('🔍 TROUBLESHOOTING: PDF iframe onload triggered');
                            if (pdfLoading) pdfLoading.style.display = 'none';
                            if (pdfError) pdfError.style.display = 'none';
                            if (pdfBlocked) pdfBlocked.style.display = 'none';
                        };
                        
                        pdfViewer.onerror = function(error) {
                            console.error('🔍 TROUBLESHOOTING: PDF iframe onerror triggered:', error);
                            tryNextApproach();
                        };
                        
                        console.log('🔍 TROUBLESHOOTING: Waiting 3 seconds for iframe to load...');
                        // Wait and check if it loads
                        await new Promise(resolve => setTimeout(resolve, 3000));
                        
                        console.log('🔍 TROUBLESHOOTING: Checking iframe content...');
                        // Check if PDF loaded successfully
                        const iframeSuccess = await checkIframeContent(pdfViewer);
                        console.log('🔍 TROUBLESHOOTING: Iframe content check result:', iframeSuccess);
                        
                        if (iframeSuccess) {
                            console.log('🔍 TROUBLESHOOTING: Standard iframe approach successful');
                            return;
                        } else {
                            console.log('🔍 TROUBLESHOOTING: Standard iframe approach failed, trying next...');
                        }
                        
                    } catch (error) {
                        console.error('🔍 TROUBLESHOOTING: Standard iframe approach failed:', error);
                    }
                    
                    // Approach 2: Object/embed element (better for some browsers)
                    try {
                        console.log('Trying object/embed approach...');
                        if (iframeViewer) iframeViewer.style.display = 'none';
                        if (objectViewer) objectViewer.style.display = 'block';
                        
                        pdfObject.data = fileUrl;
                        pdfObject.type = 'application/pdf';
                        
                        // Wait and check
                        await new Promise(resolve => setTimeout(resolve, 3000));
                        
                        // Check if object loaded
                        if (await checkObjectContent(pdfObject)) {
                            console.log('Object/embed approach successful');
                            return;
                        }
                        
                    } catch (error) {
                        console.error('Object/embed approach failed:', error);
                    }
                    
                    // Approach 3: PDF.js viewer (most compatible)
                    try {
                        console.log('Trying PDF.js viewer approach...');
                        if (objectViewer) objectViewer.style.display = 'none';
                        if (pdfjsViewer) pdfjsViewer.style.display = 'block';
                        
                        // Use PDF.js viewer
                        const pdfjsUrl = `https://mozilla.github.io/pdf.js/web/viewer.html?file=${encodeURIComponent(fileUrl)}`;
                        pdfjsIframe.src = pdfjsUrl;
                        
                        // Wait and check
                        await new Promise(resolve => setTimeout(resolve, 4000));
                        
                        if (await checkIframeContent(pdfjsIframe)) {
                            console.log('PDF.js viewer approach successful');
                            return;
                        }
                        
                    } catch (error) {
                        console.error('PDF.js viewer approach failed:', error);
                    }
                    
                    // Approach 4: Google Docs viewer (fallback)
                    try {
                        console.log('Trying Google Docs viewer approach...');
                        const googleViewerUrl = `https://docs.google.com/gview?url=${encodeURIComponent(fileUrl)}&embedded=true`;
                        pdfViewer.src = googleViewerUrl;
                        
                        if (iframeViewer) iframeViewer.style.display = 'block';
                        if (objectViewer) objectViewer.style.display = 'none';
                        if (pdfjsViewer) pdfjsViewer.style.display = 'none';
                        
                        // Wait and check
                        await new Promise(resolve => setTimeout(resolve, 5000));
                        
                        if (await checkIframeContent(pdfViewer)) {
                            console.log('Google Docs viewer approach successful');
                            return;
                        }
                        
                    } catch (error) {
                        console.error('Google Docs viewer approach failed:', error);
                    }
                    
                    // All approaches failed - show appropriate error message
                    console.error('All PDF loading approaches failed');
                    if (pdfLoading) pdfLoading.style.display = 'none';
                    
                    // Check if it's a browser blocking issue
                    if (await isBrowserBlocking()) {
                        if (pdfBlocked) pdfBlocked.style.display = 'block';
                    } else {
                        if (pdfError) pdfError.style.display = 'block';
                    }
                }
                
                // Helper function to check iframe content
                async function checkIframeContent(iframe) {
                    console.log('🔍 TROUBLESHOOTING: Checking iframe content...');
                    try {
                        const iframeContent = iframe.contentDocument || iframe.contentWindow.document;
                        console.log('🔍 TROUBLESHOOTING: Iframe content access result:', !!iframeContent);
                        
                        if (iframeContent && iframeContent.body) {
                            const text = iframeContent.body.innerText || '';
                            console.log('🔍 TROUBLESHOOTING: Iframe content preview:', text.substring(0, 200));
                            console.log('🔍 TROUBLESHOOTING: Iframe content length:', text.length);
                            
                            // Check for error responses
                            const errorIndicators = ['statusCode', 'Bucket not found', 'Access Denied', 'blocked', 'This page has been blocked', 'Microsoft Edge'];
                            const hasError = errorIndicators.some(indicator => text.includes(indicator));
                            
                            if (hasError) {
                                console.error('🔍 TROUBLESHOOTING: Iframe contains error response:', text);
                                return false;
                            }
                            
                            // Check for PDF content indicators
                            const pdfIndicators = ['PDF', 'Page', 'Document', 'Certificate', 'Analysis', 'COA'];
                            const hasPdfContent = pdfIndicators.some(indicator => text.includes(indicator)) || text.length > 50;
                            
                            if (hasPdfContent) {
                                console.log('🔍 TROUBLESHOOTING: PDF content detected in iframe');
                                return true;
                            } else {
                                console.log('🔍 TROUBLESHOOTING: No PDF content indicators found');
                            }
                        } else {
                            console.log('🔍 TROUBLESHOOTING: Could not access iframe body content');
                        }
                    } catch (e) {
                        console.warn('🔍 TROUBLESHOOTING: Could not validate iframe content:', e);
                    }
                    return false;
                }
                
                // Helper function to check object content
                async function checkObjectContent(object) {
                    try {
                        // Object elements are harder to check, so we'll assume success if no error
                        return object.offsetHeight > 0;
                    } catch (e) {
                        console.warn('Could not validate object content:', e);
                        return false;
                    }
                }
                
                // Helper function to detect browser blocking
                async function isBrowserBlocking() {
                    // Check for common browser blocking indicators
                    const userAgent = navigator.userAgent.toLowerCase();
                    const isEdge = userAgent.includes('edg/');
                    const isChrome = userAgent.includes('chrome/');
                    const isFirefox = userAgent.includes('firefox/');
                    
                    // These browsers commonly block PDF iframes
                    return isEdge || isChrome || isFirefox;
                }
                
                // Function to try next approach
                function tryNextApproach() {
                    console.log('Trying next PDF loading approach...');
                }

                async function loadCOANow() {
                    console.log('🔍 TROUBLESHOOTING: Loading COA with enhanced PDF preview...');
                    const statusEl = document.getElementById('cms-status');
                    const pdfViewer = document.getElementById('pdf-viewer');
                    const pdfSection = document.getElementById('pdf-preview-section');
                    
                    try {
                        statusEl.innerHTML = '🔄 Loading Supabase...';
                        
                        // Load Supabase if not available
                        if (!window.supabase) {
                            console.log('🔍 TROUBLESHOOTING: Loading Supabase library...');
                            await new Promise((resolve, reject) => {
                                const script = document.createElement('script');
                                script.src = 'https://unpkg.com/@supabase/supabase-js@2.39.3/dist/umd/supabase.js';
                                script.onload = () => {
                                    console.log('🔍 TROUBLESHOOTING: Supabase library loaded');
                                    resolve();
                                };
                                script.onerror = (error) => {
                                    console.error('🔍 TROUBLESHOOTING: Supabase library failed to load:', error);
                                    reject(error);
                                };
                                document.head.appendChild(script);
                            });
                        }
                        
                        statusEl.innerHTML = '📊 Creating Supabase client...';
                        const client = supabase.createClient(
                            'https://hctdzwmlkgnuxcuhjooe.supabase.co',
                            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjdGR6d21sa2dudXhjdWhqb29lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMjE2NjAsImV4cCI6MjA3NTY5NzY2MH0.EzxFceWzutTtlJvKpzI5UbWug3B8o2e5hFWi0yaXHog'
                        );
                        console.log('🔍 TROUBLESHOOTING: Supabase client created');
                        
                        statusEl.innerHTML = '📄 Loading COA data...';
                        const { data: coas, error } = await client
                            .from('coas')
                            .select('*')
                            .not('file_url', 'is', null)
                            .neq('file_url', '')
                            .order('created_at', { ascending: false })
                            .limit(1);
                        
                        if (error) {
                            console.error('🔍 TROUBLESHOOTING: Database error:', error);
                            throw error;
                        }
                        if (coas.length === 0) {
                            console.error('🔍 TROUBLESHOOTING: No COAs found in database');
                            throw new Error('No COAs found');
                        }
                        
                        const coa = coas[0];
                        console.log('🔍 TROUBLESHOOTING: COA data loaded:', coa);
                        statusEl.innerHTML = '✅ COA loaded! Loading PDF preview...';
                        
                        // Show PDF section
                        if (pdfSection) {
                            pdfSection.style.display = 'block';
                            console.log('🔍 TROUBLESHOOTING: PDF section displayed');
                        }
                        
                        // Get proper file URL using robust resolution
                        const fileUrl = getProperFileUrl(coa);
                        console.log('🔍 TROUBLESHOOTING: Resolved file URL:', fileUrl);
                        console.log('🔍 TROUBLESHOOTING: PDF viewer element:', pdfViewer);
                        
                        // Test URL accessibility first
                        if (fileUrl) {
                            console.log('🔍 TROUBLESHOOTING: Testing URL accessibility...');
                            try {
                                const response = await fetch(fileUrl, { method: 'HEAD' });
                                console.log('🔍 TROUBLESHOOTING: URL accessibility test result:', response.status, response.statusText);
                                if (!response.ok) {
                                    throw new Error(`URL not accessible: ${response.status} ${response.statusText}`);
                                }
                            } catch (urlError) {
                                console.error('🔍 TROUBLESHOOTING: URL accessibility test failed:', urlError);
                                statusEl.innerHTML = '❌ PDF URL not accessible: ' + urlError.message;
                                statusEl.style.background = '#fecaca';
                                statusEl.style.color = '#991b1b';
                                return;
                            }
                        }
                        
                        if (fileUrl && pdfViewer) {
                            console.log('🔍 TROUBLESHOOTING: Starting PDF load process...');
                            // Load PDF with fallback strategies
                            await loadPDFWithFallbacks(pdfViewer, fileUrl);
                            statusEl.innerHTML = '✅ PDF preview loaded successfully!';
                        } else {
                            console.error('🔍 TROUBLESHOOTING: Missing fileUrl or pdfViewer:', { fileUrl, pdfViewer });
                            throw new Error('No valid PDF URL found');
                        }
                        
                        // Hide status after success
                        setTimeout(() => {
                            statusEl.style.display = 'none';
                        }, 2000);
                        
                    } catch (error) {
                        console.error('🔍 TROUBLESHOOTING: Error loading COA:', error);
                        statusEl.innerHTML = '❌ Error: ' + error.message;
                        statusEl.style.background = '#fecaca';
                        statusEl.style.color = '#991b1b';
                        
                        // Show PDF section even on error for better UX
                        if (pdfSection) pdfSection.style.display = 'block';
                    }
                }
                
                // Auto-load when page is ready
                document.addEventListener('DOMContentLoaded', () => {
                    console.log('Page loaded, auto-loading COA with enhanced PDF preview...');
                    setTimeout(loadCOANow, 1000);
                });
                </script>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials">
        <div class="container">
            <h2 class="section-title">What Our Clients Say</h2>
            <div class="testimonials-grid">
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"ZyntroTest's LCMS analysis exceeded our expectations. The detailed COA and fast turnaround helped us launch our peptide line with confidence."</p>
                    </div>
                    <div class="testimonial-author">
                        <strong>Dr. Sarah Chen</strong>
                        <span>BioVenture Research</span>
                    </div>
                </div>
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"Professional service and transparent pricing. Their DAD technology caught contaminants that other labs missed."</p>
                    </div>
                    <div class="testimonial-author">
                        <strong>Mike Rodriguez</strong>
                        <span>NutriPure Supplements</span>
                    </div>
                </div>
                <div class="testimonial">
                    <div class="testimonial-content">
                        <p>"The detailed impurity profiling supported our FDA submission. ZyntroTest is our go-to lab for critical testing."</p>
                    </div>
                    <div class="testimonial-author">
                        <strong>Jennifer Walsh</strong>
                        <span>Apex Biotechnology</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>Get Started Today</h2>
                <p>Ready for precise LCMS testing? Submit your inquiry and receive a detailed quote with shipping instructions.</p>
                <a href="contact.html" class="btn btn-primary btn-large">Request a Test</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <!-- Footer will be loaded by JavaScript include -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <img src="images/zyntrotest-logo.svg" alt="ZyntroTest" width="120" height="40">
                    </div>
                    <p>Precision LCMS testing for peptides, supplements, and hemp products. Fast, accurate, and reliable analytical services.</p>
                </div>
                
                <div class="footer-links">
                    <div class="footer-section">
                        <h4>Services</h4>
                        <ul>
                            <li><a href="services.html#peptide">Peptide Testing</a></li>
                            <li><a href="services.html#supplement">Supplement Testing</a></li>
                            <li><a href="services.html#hemp">Hemp Testing</a></li>
                            <li><a href="services.html#pricing">Pricing</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="search.html">Search COAs</a></li>
                            <li><a href="sample-submission.html">Submit Sample</a></li>
                            <li><a href="blog.html">Blog</a></li>
                            <li><a href="coa-samples.html">Sample COAs</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="contact.html">Contact Us</a></li>
                            <li><a href="contact.html">Get in Touch</a></li>
                            <li><a href="contact.html">Location: College Station, Texas</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p>&copy; <span id="current-year">2025</span> ZyntroTest. All rights reserved.</p>
                    <div class="footer-legal">
                        <a href="privacy.html">Privacy Policy</a>
                        <a href="terms.html">Terms of Service</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- No-Cache Headers and Cache-Busting -->
    <script src="js/no-cache.js?v=20251021181055" data-no-cache-bust></script>
    
    <!-- Load header (already loaded in head, but ensure it's initialized) -->
    <script>
    // Ensure header is loaded before other scripts run
    if (typeof initializeNavigation !== 'function') {
        console.warn('Header script not loaded yet');
    }
    </script>
    
    <!-- Anime.js Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <!-- Animation utilities -->
    <script src="js/animations.js?v=20251021181055"></script>
    
    <!-- Supabase Configuration -->
    <script src="admin/js/supabase-config.js?v=20251021181055"></script>
    
    <!-- Load header include -->
    <script src="js/load-header.js"></script>
    
    <!-- Main script -->
    <script src="js/script.js?v=20251021181055"></script>
    
    <!-- CMS Content Loader -->
    <script src="js/cms-loader.js?v=20251021181055"></script>
</body>
</html>
